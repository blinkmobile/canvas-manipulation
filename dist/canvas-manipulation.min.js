!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.canvasManipulation=t.canvasManipulation||{})}(this,function(t){"use strict";function e(t){var e=t.getContext("2d");if(!e)throw new TypeError("CanvasRenderingContext2D could not be created from <canvas> element");return e}function n(t,n){var i=t.width,r=t.height,a=i/n.width,h=r/n.height,u=Math.min(a,h,1),o=(i-n.width*u)/2,d=(r-n.height*u)/2,f=n.width*u,c=n.height*u,g=e(t);g.clearRect(o,d,f,c),g.drawImage(n,o,d,f,c)}function i(t){var n=document.createElement("canvas"),i=e(n);return n.width=t.width,n.height=t.height,i.clearRect(0,0,t.width,t.height),i.putImageData(t,0,0),n}function r(t){var n=t.width,i=t.height,r=e(t),a=r.getImageData(0,0,n,i).data,h=function(t,e){return a[4*(n*e+t)+3]},u=function(t){for(var e=t?1:-1,r=t?0:i-1;t?r<i:r>-1;r+=e)for(var a=0;a<n;a+=1)if(h(a,r))return r;return null},o=function(t){for(var e=t?1:-1,r=t?0:n-1;t?r<n:r>-1;r+=e)for(var a=0;a<i;a+=1)if(h(r,a))return r;return null},d=u(!0),f=u(!1),c=o(!0),g=o(!1);if(null!==d&&null!==f&&null!==c&&null!==g){var l=g-c+1,w=f-d+1;return r.getImageData(c,d,l,w)}}t.drawImageCentered=n,t.resize=function(t,a,h,u){if(t.width===a&&t.height===h)return!0;var o=r(t);if(!o)return t.width=a,t.height=h,!0;if(a>=o.width&&h>=o.height){var d=(a-o.width)/2,f=(h-o.height)/2,c=e(t);return t.width=a,t.height=h,c.putImageData(o,d,f,0,0,o.width,o.height),!0}if(!u)return t.width=a,t.height=h,!1;var g=i(o);return t.width=a,t.height=h,n(t,g),!0},t.toDataURLCropped=function(t,e,n){var a=r(t);if(a)return i(a).toDataURL(e,n)},Object.defineProperty(t,"__esModule",{value:!0})});
